# 用 Factory Method 引入多态创建
- 前提条件

  - 类必须实现一个静态或非静态的方法来初始化并返回一个对象
  - 形成 Factory Method 模式

    - 用来标识 Factory  Method 实现者可能实例化并返回的类集合的类型
    - 实现这一类型的类集合
    - 实现 Factory Method 的类，它们在本地决定实例化、初始化并返回哪些类

- 动机

  - 一个层次中的类都相似的实现一个方法，只是对象创建的步骤不同
  - 当兄弟子类实现了除对象创建步骤外都很相似的方法时
  - 当超类和子类实现了除对象创建步骤外都很相似的方法时

- 优点

  - 减少因创建自定义对象而产生的重复代码
  - 有效地表达了对象创建发生的位置，以及如何重写对象的创建
  - 强制 Factory Method 使用的类必须实现统一的类型

- 缺点

  - 可能会向 Factory Method 的一些实现者传递不必要的参数

- 做法

  - 在创建代码上应用提炼方法重构或把创建代码改为对已经存在的实例化方法的调用

    - 给实例化方法起一个通用的名字(createBuilder、newProduct)

      - 确保实例化方法的返回值类型是兄弟子类中相似方法创建的对象的通用类型

  - 对所有兄弟子类中的相似方法重复步骤（1）

    - 这回在每个兄弟子类中都生成一个实例化方法，而且这些实例化方法的签名应该是一致的

  - 修改兄弟子类的超类

    - 如果不能修改这个超类或者不希望修改它，应用提炼超类重构来产生一个集成兄弟子类原超类的新超类

  - 在相似方法上应用形成 Template Method 重构
  - 如果兄弟子类中存在其他的、能够从调用之前产生的工厂方法中获益的相似方法，重复步骤（1）~步骤（4）
  - 如果大多数 ConcreteCreator 中的工厂方法都包含相同的实例化代码，上移这些代码，把超类中声明的抽象方法改成具体的工厂方法，并使它执行默认的实例化行为